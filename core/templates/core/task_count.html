{% load static %}
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title></title>
	<script src="{% static 'js/htmx.min.js' %}"></script>
	<script src="{% static 'js/htmx-ext-sse.min.js' %}"></script>
</head>
<body>
	<p>Task count: {{ task_count }}</p>
	<div hx-ext="sse" sse-connect="{% url 'task_count_sse' %}" sse-close="disconnected" sse-swap="message"></div>
	<script>
		const stream = new EventSource("{% url 'task_count_sse' %}");
		stream.addEventListener("ping", console.log)
	</script>
</body>
</html>